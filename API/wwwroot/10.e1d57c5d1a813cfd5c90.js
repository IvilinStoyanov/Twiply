(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"luD+":function(t,e,n){"use strict";n.r(e),n.d(e,"MessagesModule",function(){return Y});var s=n("ofXK"),a=n("tyNb"),c=n("3Pt+"),i=n("fXoL"),o=n("tH0l"),r=n("0IaG"),g=n("XiUz"),b=n("NFeN"),d=n("kmnG"),m=n("qFsG"),h=n("bTqV"),l=n("znSr"),u=n("Qu3c");function f(t,e){if(1&t){const t=i.Zb();i.Yb(0,"div"),i.Yb(1,"div",12),i.gc("click",function(){i.Ac(t);const n=e.$implicit;return i.kc(2).getMessageThread(n.senderUsername)}),i.Yb(2,"div",13),i.Ub(3,"img",14),i.Xb(),i.Yb(4,"div",15),i.Yb(5,"span",16),i.Ic(6),i.lc(7,"titlecase"),i.Xb(),i.Yb(8,"span",17),i.Ic(9),i.Yb(10,"span",18),i.Ic(11),i.lc(12,"date"),i.Xb(),i.Xb(),i.Xb(),i.Xb(),i.Xb()}if(2&t){const t=e.$implicit;i.Gb(3),i.rc("src",t.senderPhotoUrl||"./assets/img/common/default-user-profile-picture.png",i.Cc),i.Gb(3),i.Jc(i.mc(7,4,t.senderUsername)),i.Gb(3),i.Kc("",t.content," "),i.Gb(2),i.Jc(i.mc(12,6,t.messageSent))}}const p=function(t){return{"mat-success":t}};function M(t,e){if(1&t&&(i.Yb(0,"div"),i.Yb(1,"div",28),i.Ub(2,"img",29),i.Xb(),i.Yb(3,"div",30),i.Yb(4,"div",31),i.Ic(5),i.Yb(6,"mat-icon",32),i.Ic(7,"check"),i.Xb(),i.Xb(),i.Xb(),i.Xb()),2&t){const t=i.kc().$implicit;i.Gb(2),i.rc("src",t.senderPhotoUrl,i.Cc),i.Gb(3),i.Kc("",t.content," "),i.Gb(1),i.qc("ngClass",i.tc(4,p,t.dateRead))("matTooltip",t.dateRead?"read":"unread")}}function C(t,e){if(1&t&&(i.Yb(0,"div"),i.Yb(1,"div",33),i.Ub(2,"img",29),i.Xb(),i.Yb(3,"div",15),i.Yb(4,"div",34),i.Yb(5,"div",35),i.Ic(6),i.Xb(),i.Xb(),i.Xb(),i.Xb()),2&t){const t=i.kc().$implicit;i.Gb(2),i.rc("src",t.senderPhotoUrl,i.Cc),i.Gb(4),i.Kc("",t.content," ")}}function x(t,e){if(1&t&&(i.Yb(0,"li"),i.Hc(1,M,8,6,"div",27),i.Hc(2,C,7,2,"div",27),i.Xb()),2&t){const t=e.$implicit,n=i.kc(3);i.Gb(1),i.qc("ngIf",t.senderUsername!==n.username),i.Gb(1),i.qc("ngIf",t.senderUsername==n.username)}}function v(t,e){if(1&t){const t=i.Zb();i.Yb(0,"div",19),i.Yb(1,"div",20),i.Yb(2,"ul",21),i.Hc(3,x,3,2,"li",10),i.Xb(),i.Yb(4,"div",22),i.Yb(5,"form",23),i.Yb(6,"mat-form-field",24),i.Yb(7,"mat-label"),i.Ic(8,"send message"),i.Xb(),i.Ub(9,"input",25),i.Yb(10,"button",26),i.gc("click",function(){return i.Ac(t),i.kc(2).sendMessage()}),i.Yb(11,"mat-icon"),i.Ic(12,"send"),i.Xb(),i.Xb(),i.Xb(),i.Xb(),i.Xb(),i.Xb(),i.Xb()}if(2&t){const t=i.kc(2);i.Gb(3),i.qc("ngForOf",t.messageThread),i.Gb(1),i.Ec("max-width",360,"px"),i.Gb(1),i.qc("formGroup",t.sendMessageForm)}}function O(t,e){if(1&t&&(i.Yb(0,"div",1),i.Yb(1,"div",2),i.Yb(2,"div",3),i.Yb(3,"p",4),i.Ic(4,"Chats"),i.Xb(),i.Yb(5,"div"),i.Yb(6,"mat-icon",5),i.Ic(7,"settings"),i.Xb(),i.Yb(8,"mat-icon",6),i.Ic(9,"more_horiz"),i.Xb(),i.Xb(),i.Xb(),i.Yb(10,"mat-form-field",7),i.Yb(11,"mat-label"),i.Ic(12,"Search contact"),i.Xb(),i.Ub(13,"input",8),i.Yb(14,"mat-icon",9),i.Ic(15,"search"),i.Xb(),i.Xb(),i.Hc(16,f,13,8,"div",10),i.Xb(),i.Hc(17,v,13,4,"div",11),i.Xb()),2&t){const t=i.kc();i.Gb(16),i.qc("ngForOf",t.messages),i.Gb(1),i.qc("ngIf",!t.isChatLoading&&t.messageThread)}}const P=[{path:"",component:(()=>{class t{constructor(t,e,n){this.messageService=t,this.fb=e,this.dialog=n,this.messages=[],this.pageNumber=1,this.pageSize=100,this.isLoading=!0,this.isChatLoading=!0,this.sendMessageForm=this.fb.group({content:new c.d("")})}ngOnInit(){this.loadMessages()}loadMessages(){this.messageService.getMessages(this.pageNumber,this.pageSize).subscribe(t=>{this.messages=t.result,this.pagination=t.pagination,this.isLoading=!1})}getMessageThread(t){this.isChatLoading=!0,this.username=t,this.messageService.getMessageThread(t).subscribe(t=>{this.messageThread=t,this.isChatLoading=!1})}sendMessage(){let t=this.sendMessageForm.get("content").value;this.messageService.sendMessage(this.username,t).subscribe(t=>{this.messageThread.push(t),this.sendMessageForm.reset()})}pageChanged(t){this.pageNumber=t.page,this.loadMessages()}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(o.a),i.Tb(c.c),i.Tb(r.b))},t.\u0275cmp=i.Nb({type:t,selectors:[["app-message-container"]],decls:1,vars:1,consts:[["fxLayout","row",4,"ngIf"],["fxLayout","row"],["fxLayout","column",1,"border-right","chat-sub-container"],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"text-bold"],["matSuffix","",1,"muted","navigate","mr-1"],["matSuffix","",1,"muted","navigate"],["appearance","outline"],["matInput","","value",""],["matSuffix","",1,"muted"],[4,"ngFor","ngForOf"],["class","chat","fxFlex","",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"chat-member-panel","border-rounder","navigate","p-2",3,"click"],[1,"mr-2"],["alt","photo of a member",1,"mt-0",3,"src"],["fxLayout","column"],[1,"text-bold","mb-1"],[1,"text-xs-md"],[1,"muted","text-xs"],["fxFlex","",1,"chat"],[1,"chat-history"],[1,"m-b-0"],[1,"send-btn"],[3,"formGroup"],["appearance","outline","fxFlex",""],["matInput","","formControlName","content"],["matSuffix","","mat-icon-button","",3,"click"],[4,"ngIf"],[1,"message-data","text-right"],["alt","avatar",3,"src"],["fxLayout","column","fxLayoutAlign","start end"],[1,"message","other-message","my-message","float-right"],[1,"muted",3,"ngClass","matTooltip"],[1,"message-data"],[1,"message-content-container"],[1,"message","my-message"]],template:function(t,e){1&t&&i.Hc(0,O,18,2,"div",0),2&t&&i.qc("ngIf",!e.isLoading)},directives:[s.m,g.c,g.b,b.a,d.g,d.c,d.f,m.b,s.l,g.a,c.r,c.m,c.g,c.b,c.l,c.f,h.a,s.k,l.a,u.a],pipes:[s.t,s.e],styles:['img[_ngcontent-%COMP%]{width:70px;height:auto;border-radius:50%}.chat-sub-container[_ngcontent-%COMP%]{padding:5px 10px 5px 15px}.chat-member-panel[_ngcontent-%COMP%]:hover{background:#f7f7f7}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:20px;overflow:auto;height:72vh}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:35px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:40px;width:40px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message-data-time[_ngcontent-%COMP%]{padding-left:6px;position:absolute;bottom:-20px;right:0;min-width:100px;text-align:right}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#292929;padding:15px;font-size:14px;border-radius:7px;display:inline-block;position:relative}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .my-message[_ngcontent-%COMP%]{background:#efefef}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .other-message[_ngcontent-%COMP%]{background:#e8f1f3;text-align:right}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .other-message[_ngcontent-%COMP%]:after{border-bottom-color:#e8f1f3;left:93%}.chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{padding:20px}.chat[_ngcontent-%COMP%]   .message-content-container[_ngcontent-%COMP%]{position:relative}.chat[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{padding-left:20px}.float-right[_ngcontent-%COMP%]{float:right}.clearfix[_ngcontent-%COMP%]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}']}),t})()}];let _=(()=>{class t{}return t.\u0275mod=i.Rb({type:t}),t.\u0275inj=i.Qb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(P)],a.e]}),t})();var X=n("FpXt");let Y=(()=>{class t{}return t.\u0275mod=i.Rb({type:t}),t.\u0275inj=i.Qb({factory:function(e){return new(e||t)},imports:[[s.c,X.a,_]]}),t})()}}]);