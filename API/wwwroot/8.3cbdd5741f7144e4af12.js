(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ZUZB:function(e,t,i){"use strict";i.r(t),i.d(t,"MemberEditModule",function(){return Z});var o=i("ofXK"),n=i("tyNb"),s=i("XGsO"),r=i("IzEk"),a=i("fXoL");class l{constructor(e){var t;this.rawFile=e;let i=(t=e)&&(t.nodeName||t.prop&&t.attr&&t.find)?e.value:e;this["_createFrom"+("string"==typeof i?"FakePath":"Object")](i)}_createFromFakePath(e){this.lastModifiedDate=void 0,this.size=void 0,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}_createFromObject(e){this.size=e.size,this.type=e.type,this.name=e.name}}class c{constructor(e,t,i){this.url="/",this.headers=[],this.withCredentials=!0,this.formData=[],this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.index=void 0,this.uploader=e,this.some=t,this.options=i,this.file=new l(t),this._file=t,e.options&&(this.method=e.options.method||"POST",this.alias=e.options.itemAlias||"file"),this.url=e.options.url}upload(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,{}),this.uploader._onErrorItem(this,"",0,{})}}cancel(){this.uploader.cancelItem(this)}remove(){this.uploader.removeFromQueue(this)}onBeforeUpload(){}onBuildForm(e){return{form:e}}onProgress(e){return{progress:e}}onSuccess(e,t,i){return{response:e,status:t,headers:i}}onError(e,t,i){return{response:e,status:t,headers:i}}onCancel(e,t,i){return{response:e,status:t,headers:i}}onComplete(e,t,i){return{response:e,status:t,headers:i}}_onBeforeUpload(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}_onBuildForm(e){this.onBuildForm(e)}_onProgress(e){this.progress=e,this.onProgress(e)}_onSuccess(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=void 0,this.onSuccess(e,t,i)}_onError(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=void 0,this.onError(e,t,i)}_onCancel(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=void 0,this.onCancel(e,t,i)}_onComplete(e,t,i){this.onComplete(e,t,i),this.uploader.options.removeAfterUpload&&this.remove()}_prepareToUploading(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}}let p=(()=>{class e{static getMimeClass(e){let t="application";return-1!==this.mime_psd.indexOf(e.type)||e.type.match("image.*")?t="image":e.type.match("video.*")?t="video":e.type.match("audio.*")?t="audio":"application/pdf"===e.type?t="pdf":-1!==this.mime_compress.indexOf(e.type)?t="compress":-1!==this.mime_doc.indexOf(e.type)?t="doc":-1!==this.mime_xsl.indexOf(e.type)?t="xls":-1!==this.mime_ppt.indexOf(e.type)&&(t="ppt"),"application"===t&&(t=this.fileTypeDetection(e.name)),t}static fileTypeDetection(e){let t={jpg:"image",jpeg:"image",tif:"image",psd:"image",bmp:"image",png:"image",nef:"image",tiff:"image",cr2:"image",dwg:"image",cdr:"image",ai:"image",indd:"image",pin:"image",cdp:"image",skp:"image",stp:"image","3dm":"image",mp3:"audio",wav:"audio",wma:"audio",mod:"audio",m4a:"audio",compress:"compress",zip:"compress",rar:"compress","7z":"compress",lz:"compress",z01:"compress",bz2:"compress",gz:"compress",pdf:"pdf",xls:"xls",xlsx:"xls",ods:"xls",mp4:"video",avi:"video",wmv:"video",mpg:"video",mts:"video",flv:"video","3gp":"video",vob:"video",m4v:"video",mpeg:"video",m2ts:"video",mov:"video",doc:"doc",docx:"doc",eps:"doc",txt:"doc",odt:"doc",rtf:"doc",ppt:"ppt",pptx:"ppt",pps:"ppt",ppsx:"ppt",odp:"ppt"},i=e.split(".");if(i.length<2)return"application";let o=i[i.length-1].toLowerCase();return void 0===t[o]?"application":t[o]}}return e.mime_doc=["application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],e.mime_xsl=["application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],e.mime_ppt=["application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],e.mime_psd=["image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd"],e.mime_compress=["application/x-gtar","application/x-gcompress","application/compress","application/x-tar","application/x-rar-compressed","application/octet-stream","application/x-zip-compressed","application/zip-compressed","application/x-7z-compressed","application/gzip","application/x-bzip2"],e})();class d{constructor(e){this.isUploading=!1,this.queue=[],this.progress=0,this._nextIndex=0,this.options={autoUpload:!1,isHTML5:!0,filters:[],removeAfterUpload:!1,disableMultipart:!1,formatDataFunction:e=>e._file,formatDataFunctionIsAsync:!1},this.setOptions(e),this.response=new a.p}setOptions(e){this.options=Object.assign(this.options,e),this.authToken=this.options.authToken,this.authTokenHeader=this.options.authTokenHeader||"Authorization",this.autoUpload=this.options.autoUpload,this.options.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.options.maxFileSize&&this.options.filters.unshift({name:"fileSize",fn:this._fileSizeFilter}),this.options.allowedFileType&&this.options.filters.unshift({name:"fileType",fn:this._fileTypeFilter}),this.options.allowedMimeType&&this.options.filters.unshift({name:"mimeType",fn:this._mimeTypeFilter});for(let t=0;t<this.queue.length;t++)this.queue[t].url=this.options.url}addToQueue(e,t,i){let o=[];for(let a of e)o.push(a);let n=this._getFilters(i),s=this.queue.length,r=[];o.map(e=>{t||(t=this.options);let i=new l(e);if(this._isValidFile(i,n,t)){let i=new c(this,e,t);r.push(i),this.queue.push(i),this._onAfterAddingFile(i)}else this._onWhenAddingFileFailed(i,n[this._failFilterIndex],t)}),this.queue.length!==s&&(this._onAfterAddingAll(r),this.progress=this._getTotalProgress()),this._render(),this.options.autoUpload&&this.uploadAll()}removeFromQueue(e){let t=this.getIndexOfItem(e),i=this.queue[t];i.isUploading&&i.cancel(),this.queue.splice(t,1),this.progress=this._getTotalProgress()}clearQueue(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}uploadItem(e){let t=this.getIndexOfItem(e),i=this.queue[t],o=this.options.isHTML5?"_xhrTransport":"_iframeTransport";i._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[o](i))}cancelItem(e){let t=this.getIndexOfItem(e),i=this.queue[t];i&&i.isUploading&&(this.options.isHTML5?i._xhr:i._form).abort()}uploadAll(){let e=this.getNotUploadedItems().filter(e=>!e.isUploading);e.length&&(e.map(e=>e._prepareToUploading()),e[0].upload())}cancelAll(){this.getNotUploadedItems().map(e=>e.cancel())}isFile(e){return function(e){return File&&e instanceof File}(e)}isFileLikeObject(e){return e instanceof l}getIndexOfItem(e){return"number"==typeof e?e:this.queue.indexOf(e)}getNotUploadedItems(){return this.queue.filter(e=>!e.isUploaded)}getReadyItems(){return this.queue.filter(e=>e.isReady&&!e.isUploading).sort((e,t)=>e.index-t.index)}destroy(){}onAfterAddingAll(e){return{fileItems:e}}onBuildItemForm(e,t){return{fileItem:e,form:t}}onAfterAddingFile(e){return{fileItem:e}}onWhenAddingFileFailed(e,t,i){return{item:e,filter:t,options:i}}onBeforeUploadItem(e){return{fileItem:e}}onProgressItem(e,t){return{fileItem:e,progress:t}}onProgressAll(e){return{progress:e}}onSuccessItem(e,t,i,o){return{item:e,response:t,status:i,headers:o}}onErrorItem(e,t,i,o){return{item:e,response:t,status:i,headers:o}}onCancelItem(e,t,i,o){return{item:e,response:t,status:i,headers:o}}onCompleteItem(e,t,i,o){return{item:e,response:t,status:i,headers:o}}onCompleteAll(){}_mimeTypeFilter(e){return!(this.options.allowedMimeType&&-1===this.options.allowedMimeType.indexOf(e.type))}_fileSizeFilter(e){return!(this.options.maxFileSize&&e.size>this.options.maxFileSize)}_fileTypeFilter(e){return!(this.options.allowedFileType&&-1===this.options.allowedFileType.indexOf(p.getMimeClass(e)))}_onErrorItem(e,t,i,o){e._onError(t,i,o),this.onErrorItem(e,t,i,o)}_onCompleteItem(e,t,i,o){e._onComplete(t,i,o),this.onCompleteItem(e,t,i,o);let n=this.getReadyItems()[0];this.isUploading=!1,n?n.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())}_headersGetter(e){return t=>t?e[t.toLowerCase()]||void 0:e}_xhrTransport(e){let t,i=this,o=e._xhr=new XMLHttpRequest;if(this._onBeforeUploadItem(e),"number"!=typeof e._file.size)throw new TypeError("The file specified is no longer valid");if(this.options.disableMultipart)t=this.options.formatDataFunction(e);else{t=new FormData,this._onBuildItemForm(e,t);const i=()=>t.append(e.alias,e._file,e.file.name);this.options.parametersBeforeFiles||i(),void 0!==this.options.additionalParameter&&Object.keys(this.options.additionalParameter).forEach(i=>{let o=this.options.additionalParameter[i];"string"==typeof o&&o.indexOf("{{file_name}}")>=0&&(o=o.replace("{{file_name}}",e.file.name)),t.append(i,o)}),this.options.parametersBeforeFiles&&i()}if(o.upload.onprogress=t=>{let i=Math.round(t.lengthComputable?100*t.loaded/t.total:0);this._onProgressItem(e,i)},o.onload=()=>{let t=this._parseHeaders(o.getAllResponseHeaders()),i=this._transformResponse(o.response,t);this["_on"+(this._isSuccessCode(o.status)?"Success":"Error")+"Item"](e,i,o.status,t),this._onCompleteItem(e,i,o.status,t)},o.onerror=()=>{let t=this._parseHeaders(o.getAllResponseHeaders()),i=this._transformResponse(o.response,t);this._onErrorItem(e,i,o.status,t),this._onCompleteItem(e,i,o.status,t)},o.onabort=()=>{let t=this._parseHeaders(o.getAllResponseHeaders()),i=this._transformResponse(o.response,t);this._onCancelItem(e,i,o.status,t),this._onCompleteItem(e,i,o.status,t)},o.open(e.method,e.url,!0),o.withCredentials=e.withCredentials,this.options.headers)for(let n of this.options.headers)o.setRequestHeader(n.name,n.value);if(e.headers.length)for(let n of e.headers)o.setRequestHeader(n.name,n.value);this.authToken&&o.setRequestHeader(this.authTokenHeader,this.authToken),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&i.response.emit(o.responseText)},this.options.formatDataFunctionIsAsync?t.then(e=>o.send(JSON.stringify(e))):o.send(t),this._render()}_getTotalProgress(e=0){if(this.options.removeAfterUpload)return e;let t=this.getNotUploadedItems().length,i=100/this.queue.length;return Math.round((t?this.queue.length-t:this.queue.length)*i+e*i/100)}_getFilters(e){if(!e)return this.options.filters;if(Array.isArray(e))return e;if("string"==typeof e){let t=e.match(/[^\s,]+/g);return this.options.filters.filter(e=>-1!==t.indexOf(e.name))}return this.options.filters}_render(){}_queueLimitFilter(){return void 0===this.options.queueLimit||this.queue.length<this.options.queueLimit}_isValidFile(e,t,i){return this._failFilterIndex=-1,!t.length||t.every(t=>(this._failFilterIndex++,t.fn.call(this,e,i)))}_isSuccessCode(e){return e>=200&&e<300||304===e}_transformResponse(e,t){return e}_parseHeaders(e){let t,i,o,n={};return e?(e.split("\n").map(e=>{o=e.indexOf(":"),t=e.slice(0,o).trim().toLowerCase(),i=e.slice(o+1).trim(),t&&(n[t]=n[t]?n[t]+", "+i:i)}),n):n}_onWhenAddingFileFailed(e,t,i){this.onWhenAddingFileFailed(e,t,i)}_onAfterAddingFile(e){this.onAfterAddingFile(e)}_onAfterAddingAll(e){this.onAfterAddingAll(e)}_onBeforeUploadItem(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}_onBuildItemForm(e,t){e._onBuildForm(t),this.onBuildItemForm(e,t)}_onProgressItem(e,t){let i=this._getTotalProgress(t);this.progress=i,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(i),this._render()}_onSuccessItem(e,t,i,o){e._onSuccess(t,i,o),this.onSuccessItem(e,t,i,o)}_onCancelItem(e,t,i,o){e._onCancel(t,i,o),this.onCancelItem(e,t,i,o)}}let m=(()=>{class e{constructor(e){this.onFileSelected=new a.p,this.element=e}getOptions(){return this.uploader.options}getFilters(){return{}}isEmptyAfterSelection(){return!!this.element.nativeElement.attributes.multiple}onChange(){let e=this.element.nativeElement.files,t=this.getOptions(),i=this.getFilters();this.uploader.addToQueue(e,t,i),this.onFileSelected.emit(e),this.isEmptyAfterSelection()&&(this.element.nativeElement.value="")}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(a.n))},e.\u0275dir=a.Ob({type:e,selectors:[["","ng2FileSelect",""]],hostBindings:function(e,t){1&e&&a.gc("change",function(){return t.onChange()})},inputs:{uploader:"uploader"},outputs:{onFileSelected:"onFileSelected"}}),e})(),u=(()=>{class e{constructor(e){this.fileOver=new a.p,this.onFileDrop=new a.p,this.element=e}getOptions(){return this.uploader.options}getFilters(){return{}}onDrop(e){let t=this._getTransfer(e);if(!t)return;let i=this.getOptions(),o=this.getFilters();this._preventAndStop(e),this.uploader.addToQueue(t.files,i,o),this.fileOver.emit(!1),this.onFileDrop.emit(t.files)}onDragOver(e){let t=this._getTransfer(e);this._haveFiles(t.types)&&(t.dropEffect="copy",this._preventAndStop(e),this.fileOver.emit(!0))}onDragLeave(e){this.element&&e.currentTarget===this.element[0]||(this._preventAndStop(e),this.fileOver.emit(!1))}_getTransfer(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer}_preventAndStop(e){e.preventDefault(),e.stopPropagation()}_haveFiles(e){return!!e&&(e.indexOf?-1!==e.indexOf("Files"):!!e.contains&&e.contains("Files"))}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(a.n))},e.\u0275dir=a.Ob({type:e,selectors:[["","ng2FileDrop",""]],hostBindings:function(e,t){1&e&&a.gc("drop",function(e){return t.onDrop(e)})("dragover",function(e){return t.onDragOver(e)})("dragleave",function(e){return t.onDragLeave(e)})},inputs:{uploader:"uploader"},outputs:{fileOver:"fileOver",onFileDrop:"onFileDrop"}}),e})(),b=(()=>{class e{}return e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})();var h=i("AytR"),g=i("flj8"),f=i("XiUz"),x=i("0IaG"),v=i("znSr"),y=i("NFeN"),_=i("bTqV");function I(e,t){if(1&e&&(Object(a.Yb)(0,"div",3),Object(a.Ic)(1),Object(a.Xb)()),2&e){const e=Object(a.kc)();Object(a.Gb)(1),Object(a.Kc)("",e.value,"%")}}let w=(()=>{class e{constructor(){this.value=0,this.showValue=!0,this.translate="translateX(0%)"}ngOnChanges(e){this.translate=`translateX(${e.value.currentValue}%)`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Object(a.Nb)({type:e,selectors:[["ngx-progress-bar"]],inputs:{value:"value",showValue:"showValue"},features:[a.Eb],decls:3,vars:4,consts:[[1,"ngx-progress-bar"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"ngx-progress-bar__inner"],["class","ngx-progress-bar__value",4,"ngIf"],[1,"ngx-progress-bar__value"]],template:function(e,t){1&e&&(Object(a.Yb)(0,"div",0),Object(a.Ub)(1,"div",1),Object(a.Hc)(2,I,2,1,"div",2),Object(a.Xb)()),2&e&&(Object(a.Gb)(1),Object(a.Ec)("transform",t.translate),Object(a.Hb)("aria.valuenow",t.value),Object(a.Gb)(1),Object(a.qc)("ngIf",t.showValue))},directives:[o.m],styles:["*,:after,:before{box-sizing:border-box}ngx-progress-bar{--color-bar:#3d3d3d;--color-inset-background:#f5f5f5;--color-value:#ccc;--inner-shadow:inset 0 1px 2px rgba(0,0,0,0.1);display:block}.ngx-progress-bar{background:#f5f5f5;background:var(--color-inset-background);border-radius:2px;box-shadow:inset 0 1px 2px rgba(0,0,0,.1);box-shadow:var(--inner-shadow);height:20px;margin-bottom:4px;overflow:hidden;padding:2px;position:relative;text-align:center;width:100%}.ngx-progress-bar__inner{background:#3d3d3d;background:var(--color-bar);font-size:1em;height:100%;left:-100%;line-height:35px;position:absolute;text-align:center;top:0;transition:transform .1s ease-in;width:100%;will-change:transform}.ngx-progress-bar__value{color:#ccc;color:var(--color-value);left:0;position:absolute;right:0;text-align:center;top:-1px;z-index:2}"],encapsulation:2,changeDetection:0}),e})(),F=(()=>{class e{}return e.\u0275mod=Object(a.Rb)({type:e}),e.\u0275inj=Object(a.Qb)({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})();function X(e,t){if(1&e&&(a.Yb(0,"span",25),a.Ic(1),a.lc(2,"number"),a.Xb()),2&e){const e=a.kc().$implicit;a.Gb(1),a.Kc(" ",a.nc(2,1,(null==e||null==e.file?null:e.file.size)/1024/1024,".2")," MB ")}}function k(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",16),a.Yb(1,"div",3),a.Yb(2,"mat-icon",17),a.Ic(3,"wallpaper"),a.Xb(),a.Xb(),a.Yb(4,"div",18),a.Yb(5,"div",19),a.Yb(6,"div"),a.Yb(7,"strong",20),a.Ic(8),a.Xb(),a.Hc(9,X,3,4,"span",21),a.Xb(),a.Yb(10,"div"),a.Yb(11,"mat-icon",22),a.gc("click",function(){a.Ac(e);const i=t.index;return a.kc(2).uploader.queue[i].remove()}),a.Ic(12,"close"),a.Xb(),a.Xb(),a.Xb(),a.Yb(13,"div",23),a.Ub(14,"ngx-progress-bar",24),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=t.$implicit,i=a.kc(2);a.Gb(8),a.Jc(null==e||null==e.file?null:e.file.name),a.Gb(1),a.qc("ngIf",i.uploader.options.isHTML5),a.Gb(5),a.qc("value",e.progress)}}function O(e,t){if(1&e){const e=a.Zb();a.Wb(0),a.Hc(1,k,15,3,"div",12),a.Yb(2,"div",13),a.Yb(3,"div",14),a.Yb(4,"button",15),a.gc("click",function(){return a.Ac(e),a.kc().uploader.uploadAll()}),a.Yb(5,"mat-icon"),a.Ic(6,"cloud_upload"),a.Xb(),a.Ic(7," Upload "),a.Xb(),a.Xb(),a.Xb(),a.Vb()}if(2&e){const e=a.kc();a.Gb(1),a.qc("ngForOf",e.uploader.queue),a.Gb(3),a.qc("disabled",!e.uploader.getNotUploadedItems().length)}}const Y=function(e){return{"nv-file-over":e}};let A=(()=>{class e{constructor(e){this.accountService=e,this.baseUrl=h.a.apiUrl,this.hasBaseDropzoneOver=!1,this.accountService.currentUser$.pipe(Object(r.a)(1)).subscribe(e=>this.user=e)}ngOnInit(){this.initializeUploader()}fileOverBase(e){this.hasBaseDropzoneOver=e}initializeUploader(){this.uploader=new d({url:this.baseUrl+"users/add-photo",authToken:"Bearer "+this.user.token,isHTML5:!0,allowedFileType:["image"],removeAfterUpload:!0,autoUpload:!1,maxFileSize:10485760}),this.uploader.onAfterAddingFile=e=>{e.withCredentials=!1},this.uploader.onSuccessItem=(e,t,i,o)=>{if(t){const e=JSON.parse(t);e.isMain&&(this.user.photoUrl=e.Url,this.accountService.setCurrentUser(this.user))}}}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(g.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-upload-photo-dialog"]],decls:18,vars:6,consts:[["fxLayout","row","fxLayoutAlign","center center"],["mat-dialog-title","",1,"text-center","text-ex-lg","border-bottom","pb-2"],["fxLayout","row","fxLayoutGap","25px"],["fxLayout","column"],["fxLayout","column","fxLayoutAlign","center center","ng2FileDrop","",1,"well","ten","my-drop-zone",3,"ngClass","uploader","fileOver"],["color","success",1,"mb-1"],["for","file-upload",1,"custom-file-upload"],["hidden","","id","file-upload","type","file","ng2FileSelect","",3,"uploader"],["fxLayout","column","fxFlex","320px",1,"text-secondary"],[1,"mb-4"],[1,"mb-1","mt-0"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","class","border-bottom mb-2 mt-2 pb-3",4,"ngFor","ngForOf"],[1,"mt-3"],["fxLayout","row","fxLayoutAlign","end end"],["mat-raised-button","","color","success","type","button",1,"mr-1",3,"disabled","click"],["fxLayout","row","fxLayoutAlign","start center",1,"border-bottom","mb-2","mt-2","pb-3"],["color","secondary",1,"lg-icon","mr-2"],["fxLayout","column","fxFlex",""],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"word-break","mr-1"],["nowrap","",4,"ngIf"],[1,"navigate",3,"click"],["fxLayout","row",1,"mt-1"],[2,"width","100%",3,"value"],["nowrap",""]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"h2",1),a.Ic(2,"Upload Image"),a.Xb(),a.Xb(),a.Yb(3,"mat-dialog-content"),a.Yb(4,"div",2),a.Yb(5,"div",3),a.Yb(6,"div",4),a.gc("fileOver",function(e){return t.fileOverBase(e)}),a.Yb(7,"mat-icon",5),a.Ic(8,"upload_file"),a.Xb(),a.Ic(9," Drop files to upload "),a.Xb(),a.Yb(10,"label",6),a.Ic(11," Choose file "),a.Xb(),a.Ub(12,"input",7),a.Xb(),a.Yb(13,"div",8),a.Yb(14,"div",9),a.Yb(15,"h4",10),a.Ic(16,"Uploading"),a.Xb(),a.Hc(17,O,8,2,"ng-container",11),a.Xb(),a.Xb(),a.Xb(),a.Xb()),2&e&&(a.Gb(6),a.qc("ngClass",a.tc(4,Y,t.hasBaseDropzoneOver))("uploader",t.uploader),a.Gb(6),a.qc("uploader",t.uploader),a.Gb(5),a.qc("ngIf",null==t.uploader||null==t.uploader.queue?null:t.uploader.queue.length))},directives:[f.c,f.b,x.g,x.d,f.d,u,o.k,v.a,y.a,m,f.a,o.m,o.l,_.a,w],pipes:[o.f],styles:[".well[_ngcontent-%COMP%]{width:280px;height:270px;min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.05);background:linear-gradient(90deg,#e9e9e9 50%,hsla(0,0%,100%,0) 0),linear-gradient(#e9e9e9 50%,hsla(0,0%,100%,0) 0),linear-gradient(90deg,#e9e9e9 50%,hsla(0,0%,100%,0) 0),linear-gradient(#e9e9e9 50%,hsla(0,0%,100%,0) 0);background-position:top,100%,bottom,0;background-repeat:repeat-x,repeat-y;background-size:20px 3px,3px 20px}.well[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px!important;width:40px!important;height:40px!important}.custom-file-upload[_ngcontent-%COMP%]{width:125px;margin:0 auto;background-color:#44c770!important;color:#fff!important;line-height:36px;text-align:center;padding:0 16px;border-radius:4px;box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12);cursor:pointer}.progress-container[_ngcontent-%COMP%]{width:auto;height:auto}.nv-file-over[_ngcontent-%COMP%]{border:3px solid #44c770}"]}),e})();var C=i("nYro"),M=i("OC8m"),U=i("wZkO"),L=i("3Pt+"),T=i("kmnG"),S=i("qFsG"),E=i("Kdsb"),q=i("Qu3c");const P=function(e){return{"mat-raised-button":e}};function G(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",2),a.Ub(1,"img",3),a.Yb(2,"div",4),a.Yb(3,"button",5),a.gc("click",function(){a.Ac(e);const i=t.$implicit;return a.kc().setMainPhoto(i)}),a.Ic(4," Main "),a.Xb(),a.Yb(5,"button",6),a.gc("click",function(){a.Ac(e);const i=t.$implicit;return a.kc().deletePhoto(i.id)}),a.Yb(6,"mat-icon"),a.Ic(7,"delete"),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=t.$implicit;a.Gb(1),a.rc("src",e.url,a.Cc),a.rc("alt",e.url),a.Gb(2),a.qc("disabled",e.isMain)("ngClass",a.tc(5,P,e.isMain)),a.Gb(2),a.qc("disabled",e.isMain)}}let z=(()=>{class e{constructor(e,t){this.accountService=e,this.memberService=t}ngOnInit(){}setMainPhoto(e){this.memberService.setMainPhoto(e.id).subscribe(()=>{this.user.photoUrl=e.url,this.accountService.setCurrentUser(this.user),this.member.photoUrl=e.url,this.member.photos.forEach(t=>{t.isMain&&(t.isMain=!1),t.id===e.id&&(t.isMain=!0)})})}deletePhoto(e){this.memberService.deletePhoto(e).subscribe(()=>{this.member.photos=this.member.photos.filter(t=>t.id!==e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(g.a),a.Tb(C.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-photo-edit"]],inputs:{member:"member",user:"user"},decls:2,vars:1,consts:[["fxLayout","row wrap"],["fxLayout","column","class","mr-2 mb-2",4,"ngFor","ngForOf"],["fxLayout","column",1,"mr-2","mb-2"],[1,"member-photo",3,"src","alt"],["fxLayout","row"],["mat-stroked-button","","color","secondary",1,"border-radius-right-none","border-radius-left-top-none",3,"disabled","ngClass","click"],["mat-stroked-button","","color","warn",1,"border-radius-left-none","border-radius-right-top-none",3,"disabled","click"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Hc(1,G,8,7,"div",1),a.Xb()),2&e&&(a.Gb(1),a.qc("ngForOf",t.member.photos))},directives:[f.c,o.l,_.a,o.k,v.a,y.a],styles:[".member-photo[_ngcontent-%COMP%]{width:128px}.mat-raised-button[_ngcontent-%COMP%]{background-color:#44c770;color:#fff!important}"]}),e})();const B=["editForm"];function j(e,t){1&e&&(a.Yb(0,"span",43),a.Ic(1,"You have made changes. Any unsaved changes will be lost."),a.Xb())}function D(e,t){if(1&e){const e=a.Zb();a.Yb(0,"button",44),a.gc("click",function(){return a.Ac(e),a.kc(2).toggleEdit()}),a.Yb(1,"mat-icon"),a.Ic(2,"create"),a.Xb(),a.Ic(3," Edit Profile "),a.Xb()}}function H(e,t){if(1&e){const e=a.Zb();a.Yb(0,"button",45),a.gc("click",function(){return a.Ac(e),a.kc(2).toggleEdit()}),a.Ic(1,"Cancel"),a.Xb()}}function R(e,t){if(1&e&&(a.Yb(0,"button",46),a.Ic(1,"Save"),a.Xb()),2&e){a.kc();const e=a.xc(59);a.qc("disabled",!e.dirty)}}function N(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",1),a.Yb(1,"div",2),a.Yb(2,"div",3),a.Ub(3,"img",4),a.Yb(4,"p",5),a.Ic(5,"ACTIVITY"),a.Xb(),a.Yb(6,"strong"),a.Ic(7,"Last Active:"),a.Xb(),a.Yb(8,"span",6),a.Ic(9),a.lc(10,"date"),a.Xb(),a.Yb(11,"strong"),a.Ic(12,"Members since:"),a.Xb(),a.Yb(13,"span"),a.Ic(14),a.lc(15,"date"),a.Xb(),a.Xb(),a.Yb(16,"div",7),a.Yb(17,"div",8),a.Yb(18,"div"),a.Yb(19,"strong",9),a.Ic(20),a.lc(21,"titlecase"),a.Xb(),a.Yb(22,"span",10),a.Yb(23,"mat-icon",11),a.Ic(24,"location_on"),a.Xb(),a.Ic(25),a.Xb(),a.Xb(),a.Yb(26,"div"),a.Hc(27,j,2,0,"span",12),a.Hc(28,D,4,0,"button",13),a.Hc(29,H,2,0,"button",14),a.Hc(30,R,2,1,"button",15),a.Xb(),a.Xb(),a.Yb(31,"div",16),a.Ic(32),a.Xb(),a.Yb(33,"div",17),a.Yb(34,"p",18),a.Ic(35,"followers: "),a.Yb(36,"span",19),a.Ic(37),a.Xb(),a.Xb(),a.Yb(38,"p",20),a.Ic(39,"following: "),a.Yb(40,"span",19),a.Ic(41),a.Xb(),a.Xb(),a.Xb(),a.Yb(42,"div",21),a.Yb(43,"a",22),a.Yb(44,"mat-icon"),a.Ic(45,"mail_outline"),a.Xb(),a.Ic(46,"SEND MESSAGE "),a.Xb(),a.Yb(47,"a",22),a.Yb(48,"mat-icon"),a.Ic(49,"favorite_border"),a.Xb(),a.Ic(50," LIKE "),a.Xb(),a.Yb(51,"a",20),a.Yb(52,"mat-icon"),a.Ic(53,"outlined_flag"),a.Xb(),a.Ic(54,"REPORT USER "),a.Xb(),a.Xb(),a.Yb(55,"div"),a.Yb(56,"mat-tab-group",23),a.Yb(57,"mat-tab",24),a.Yb(58,"form",25,26),a.gc("ngSubmit",function(){return a.Ac(e),a.kc().save()}),a.Yb(60,"div",27),a.Yb(61,"div",28),a.Yb(62,"p",29),a.Ic(63,"Gender:"),a.Xb(),a.Yb(64,"mat-form-field",30),a.Ub(65,"input",31),a.lc(66,"titlecase"),a.Xb(),a.Xb(),a.Yb(67,"div",28),a.Yb(68,"p",29),a.Ic(69,"Birthday:"),a.Xb(),a.Yb(70,"mat-form-field",30),a.Ub(71,"input",31),a.lc(72,"date"),a.Xb(),a.Xb(),a.Xb(),a.Yb(73,"div",28),a.Yb(74,"p",29),a.Ic(75,"Known As:"),a.Xb(),a.Yb(76,"mat-form-field",30),a.Yb(77,"input",32),a.gc("ngModelChange",function(t){return a.Ac(e),a.kc().member.knownAs=t}),a.Xb(),a.Xb(),a.Xb(),a.Yb(78,"div",28),a.Yb(79,"p",29),a.Ic(80,"Description:"),a.Xb(),a.Yb(81,"perfect-scrollbar",33),a.Yb(82,"mat-form-field",34),a.Yb(83,"textarea",35),a.gc("ngModelChange",function(t){return a.Ac(e),a.kc().member.introduction=t}),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(84,"div",28),a.Yb(85,"p",29),a.Ic(86,"Looking For:"),a.Xb(),a.Yb(87,"perfect-scrollbar"),a.Yb(88,"mat-form-field",34),a.Yb(89,"textarea",36),a.gc("ngModelChange",function(t){return a.Ac(e),a.kc().member.lookingFor=t}),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(90,"div",28),a.Yb(91,"p",29),a.Ic(92,"Interests:"),a.Xb(),a.Yb(93,"perfect-scrollbar"),a.Yb(94,"mat-form-field",34),a.Yb(95,"textarea",37),a.gc("ngModelChange",function(t){return a.Ac(e),a.kc().member.interests=t}),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(96,"mat-tab",38),a.Yb(97,"mat-icon",39),a.gc("click",function(){return a.Ac(e),a.kc().openUploadPhotoDialog()}),a.Ic(98,"add_photo_alternate"),a.Xb(),a.Ub(99,"app-photo-edit",40),a.Ub(100,"ngx-gallery",41),a.Xb(),a.Yb(101,"mat-tab",42),a.Ic(102," Content 3 "),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=a.xc(59),t=a.kc();a.Gb(3),a.rc("src",t.member.photoUrl||"./assets/img/common/default-user-profile-picture.png",a.Cc),a.Gb(6),a.Jc(a.mc(10,36,t.member.lastActive)),a.Gb(5),a.Jc(a.mc(15,38,t.member.created)),a.Gb(6),a.Jc(a.mc(21,40,t.member.username)),a.Gb(5),a.Lc("",t.member.city,", ",t.member.country," "),a.Gb(2),a.qc("ngIf",e.dirty),a.Gb(1),a.qc("ngIf",!t.isEditable),a.Gb(1),a.qc("ngIf",t.isEditable),a.Gb(1),a.qc("ngIf",t.isEditable),a.Gb(2),a.Kc(" ",t.member.age," years old "),a.Gb(5),a.Jc(null==t.likedByMembers?null:t.likedByMembers.length),a.Gb(4),a.Jc(null==t.likedMembers?null:t.likedMembers.length),a.Gb(23),a.Lb("editable",!t.isEditable),a.Gb(1),a.rc("value",a.mc(66,42,t.member.gender)),a.Gb(5),a.Lb("editable",!t.isEditable),a.Gb(1),a.rc("value",a.mc(72,44,t.member.dateOfBirth)),a.Gb(5),a.Lb("editable",!t.isEditable),a.Gb(1),a.rc("value",t.member.knownAs),a.qc("ngModel",t.member.knownAs),a.Gb(5),a.Lb("editable",!t.isEditable),a.Gb(1),a.qc("ngModel",t.member.introduction),a.Gb(5),a.Lb("editable",!t.isEditable),a.Gb(1),a.qc("ngModel",t.member.lookingFor),a.Gb(5),a.Lb("editable",!t.isEditable),a.Gb(1),a.qc("ngModel",t.member.interests),a.Gb(4),a.qc("member",t.member)("user",t.user),a.Gb(1),a.qc("options",t.galleryOptions)("images",t.galleryImages)}}const Q=[{path:"",component:(()=>{class e{constructor(e,t,i,o){this.accountService=e,this.memberService=t,this.notificationService=i,this.dialog=o,this.accountService.currentUser$.pipe(Object(r.a)(1)).subscribe(e=>this.user=e)}unloadNotification(e){this.editForm.dirty&&(e.returnValue=!0)}ngOnInit(){this.getMember(),this.loadLikes("likedBy"),this.loadLikes("liked"),this.galleryOptions=[{width:"500px",height:"500px",imagePercent:100,thumbnailsColumns:4,imageAnimation:s.a.Slide,preview:!1}]}getMember(){this.memberService.getMember(this.user.username).subscribe(e=>this.member=e)}loadLikes(e){this.memberService.getLikes(e).subscribe(t=>{"likedBy"==e&&(this.likedByMembers=t),"liked"==e&&(this.likedMembers=t)})}toggleEdit(){this.isEditable=!this.isEditable}save(){this.memberService.updateMember(this.member).subscribe(()=>{this.editForm.reset(this.member),this.notificationService.success("Profile has been updated."),console.log(this.member),this.toggleEdit()},e=>this.notificationService.error(e))}openUploadPhotoDialog(){this.dialog.open(A,{autoFocus:!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(g.a),a.Tb(C.a),a.Tb(M.a),a.Tb(x.b))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-member-edit"]],viewQuery:function(e,t){if(1&e&&a.Mc(B,1),2&e){let e;a.wc(e=a.hc())&&(t.editForm=e.first)}},hostBindings:function(e,t){1&e&&a.gc("beforeunload",function(e){return t.unloadNotification(e)},!1,a.zc)},decls:1,vars:1,consts:[["fxLayoutAlign","center start",4,"ngIf"],["fxLayoutAlign","center start"],["fxLayout","row","fxLayout.lt-sm","column","fxFlex","90",2,"margin","0 auto"],["fxLayout","column",1,"text-xs-md"],[1,"member-img",3,"src"],[1,"muted","mt-1"],[1,"mb-2"],["fxLayout","column",1,"second-column","ml-4"],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"text-lg","mr-3"],[1,"muted","text-md"],[1,"location-icon"],["class","bg-primary border-rounder text-xs mr-2 p-2",4,"ngIf"],["mat-stroked-button","","color","primary","class","pl-2",3,"click",4,"ngIf"],["mat-stroked-button","","color","secondary","class","mr-1",3,"click",4,"ngIf"],["form","editForm","mat-stroked-button","","color","success",3,"disabled",4,"ngIf"],[1,"text-secondary","text-md","mt-1","mb-2"],["fxLayout","row"],[1,"muted","mr-2"],[1,"link"],[1,"muted"],[1,"text-xs","mt-2"],[1,"muted","mr-3"],[1,"mt-3"],["label","About"],["id","editForm",3,"ngSubmit"],["editForm","ngForm"],["fxLayout","column"],["fxLayout","row",1,"muted","text-md"],[1,"table-title","text-bold","mr-2"],[1,"input-edit"],["matInput","",3,"value"],["matInput","","name","knownAs",3,"value","ngModel","ngModelChange"],[2,"height","120px","max-height","120px"],["fxFlex","100",1,"input-edit","text-justify"],["matInput","","name","introduction",1,"textarea-edit",3,"ngModel","ngModelChange"],["matInput","","name","lookingFor",1,"textarea-edit",3,"ngModel","ngModelChange"],["matInput","","name","interests",1,"textarea-edit",3,"ngModel","ngModelChange"],["label","Edit Photos"],["color","primary","matTooltip","upload new photo",1,"navigate","md-icon","float-right",3,"click"],[3,"member","user"],[1,"ngx-gallery",2,"display","inline-block","margin-bottom","20px",3,"options","images"],["label","Messages"],[1,"bg-primary","border-rounder","text-xs","mr-2","p-2"],["mat-stroked-button","","color","primary",1,"pl-2",3,"click"],["mat-stroked-button","","color","secondary",1,"mr-1",3,"click"],["form","editForm","mat-stroked-button","","color","success",3,"disabled"]],template:function(e,t){1&e&&a.Hc(0,N,103,46,"div",0),2&e&&a.qc("ngIf",t.member)},directives:[o.m,f.b,f.c,f.a,y.a,U.b,U.a,L.r,L.m,L.n,T.c,S.b,L.b,L.l,L.o,E.b,q.a,z,s.b,_.a],pipes:[o.e,o.t],styles:[".member-img[_ngcontent-%COMP%]{width:300px;padding:10px 0}.second-column[_ngcontent-%COMP%]{width:calc(100% - 160px)}.table-title[_ngcontent-%COMP%]{min-width:90px}.textarea-edit[_ngcontent-%COMP%]{height:120px}textarea[_ngcontent-%COMP%]{overflow:hidden!important}perfect-scrollbar[_ngcontent-%COMP%]{margin-bottom:10px;padding-right:15px;height:120px;max-height:120px}p[_ngcontent-%COMP%]{margin-top:3px}@media only screen and (max-width:599px){.second-column[_ngcontent-%COMP%]{width:100%;margin-top:10px;margin-left:0!important}}"]}),e})()}];let V=(()=>{class e{}return e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({factory:function(t){return new(t||e)},imports:[[n.e.forChild(Q)],n.e]}),e})();var J=i("FpXt");let Z=(()=>{class e{}return e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({factory:function(t){return new(t||e)},imports:[[o.c,V,J.a,F,b]]}),e})()}}]);